!function(f){"object"==typeof exports&&"undefined"!=typeof module?module.exports=f():"function"==typeof define&&define.amd?define([],f):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).LgThumbnail=f()}(function(){return function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);throw(f=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",f}c=n[i]={exports:{}},e[i][0].call(c.exports,function(r){return o(e[i][1][r]||r)},c,c.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){var global,factory;global=this,factory=function(){function Thumbnail(element){return this.el=element,this.core=window.lgData[this.el.getAttribute("lg-uid")],this.core.s=_extends({},thumbnailDefaults,this.core.s),this.thumbOuter=null,this.thumbOuterWidth=0,this.thumbTotalWidth=this.core.items.length*(this.core.s.thumbWidth+this.core.s.thumbMargin),this.thumbIndex=this.core.index,this.left=0,this.init(),this}var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},thumbnailDefaults={thumbnail:!0,animateThumb:!0,currentPagerPosition:"middle",thumbWidth:100,thumbContHeight:100,thumbMargin:5,exThumbImage:!1,showThumbByDefault:!0,toggleThumb:!0,pullCaptionUp:!0,enableThumbDrag:!0,enableThumbSwipe:!0,swipeThreshold:50,loadYoutubeThumbnail:!0,youtubeThumbSize:1,loadVimeoThumbnail:!0,vimeoThumbSize:"thumbnail_small",loadDailymotionThumbnail:!0};Thumbnail.prototype.init=function(){var _this=this;this.core.s.thumbnail&&1<this.core.items.length&&(this.core.s.showThumbByDefault&&setTimeout(function(){utils.addClass(_this.core.outer,"lg-thumb-open")},700),this.core.s.pullCaptionUp&&utils.addClass(this.core.outer,"lg-pull-caption-up"),this.build(),this.core.s.animateThumb?(this.core.s.enableThumbDrag&&!this.core.isTouch&&this.core.doCss()&&this.enableThumbDrag(),this.core.s.enableThumbSwipe&&this.core.isTouch&&this.core.doCss()&&this.enableThumbSwipe(),this.thumbClickable=!1):this.thumbClickable=!0,this.toggle(),this.thumbkeyPress())},Thumbnail.prototype.build=function(){var _this=this,thumbList="",vimeoErrorThumbSize="";switch(this.core.s.vimeoThumbSize){case"thumbnail_large":vimeoErrorThumbSize="640";break;case"thumbnail_medium":vimeoErrorThumbSize="200x150";break;case"thumbnail_small":vimeoErrorThumbSize="100x75"}function getThumb(src,thumb,index){var thumbImg,src=_this.core.isVideo(src,index)||{},index="";src.youtube||src.vimeo||src.dailymotion?src.youtube?thumbImg=_this.core.s.loadYoutubeThumbnail?"//img.youtube.com/vi/"+src.youtube[1]+"/"+_this.core.s.youtubeThumbSize+".jpg":thumb:src.vimeo?_this.core.s.loadVimeoThumbnail?(thumbImg="//i.vimeocdn.com/video/error_"+vimeoErrorThumbSize+".jpg",index=src.vimeo[1]):thumbImg=thumb:src.dailymotion&&(thumbImg=_this.core.s.loadDailymotionThumbnail?"//www.dailymotion.com/thumbnail/video/"+src.dailymotion[1]:thumb):thumbImg=thumb,thumbList+='<div data-vimeo-id="'+index+'" class="lg-thumb-item" style="width:'+_this.core.s.thumbWidth+"px; margin-right: "+_this.core.s.thumbMargin+'px"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSI0IiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAiIGF0dHJpYnV0ZU5hbWU9InIiIGJlZ2luPSIwO3N2Z1NwaW5uZXJzM0RvdHNTY2FsZTEuZW5kLTAuMjVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNnMiIGR1cj0iMC43NXMiIHZhbHVlcz0iMzsuMjszIi8+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAiIGN5PSIxMiIgcj0iMyIgZmlsbD0iY3VycmVudENvbG9yIj48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnMzRG90c1NjYWxlMSIgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNDVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjwvc3ZnPg==" data-original="'+thumbImg+'" data-src="'+thumbImg+'" /></div>'}if(utils.addClass(_this.core.outer,"lg-has-thumb"),_this.core.outer.querySelector(".lg").insertAdjacentHTML("beforeend",'<div class="lg-thumb-outer"><div class="lg-thumb group"></div></div>'),_this.thumbOuter=_this.core.outer.querySelector(".lg-thumb-outer"),_this.thumbOuterWidth=_this.thumbOuter.offsetWidth,_this.core.s.animateThumb&&(_this.core.outer.querySelector(".lg-thumb").style.width=_this.thumbTotalWidth+"px",_this.core.outer.querySelector(".lg-thumb").style.position="relative"),this.core.s.animateThumb&&(_this.thumbOuter.style.height=_this.core.s.thumbContHeight+"px"),_this.core.s.dynamic)for(var j=0;j<_this.core.s.dynamicEl.length;j++)getThumb(_this.core.s.dynamicEl[j].src,_this.core.s.dynamicEl[j].thumb,j);else for(var i=0;i<_this.core.items.length;i++)_this.core.s.exThumbImage?getThumb(_this.core.items[i].getAttribute("href")||_this.core.items[i].getAttribute("data-src"),_this.core.items[i].getAttribute(_this.core.s.exThumbImage),i):getThumb(_this.core.items[i].getAttribute("href")||_this.core.items[i].getAttribute("data-src"),_this.core.items[i].querySelector("img").getAttribute("src"),i);_this.core.outer.querySelector(".lg-thumb").innerHTML=thumbList;for(var $thumb=_this.core.outer.querySelectorAll(".lg-thumb-item"),n=0;n<$thumb.length;n++)(()=>{var script,$this=$thumb[n],vimeoVideoId=$this.getAttribute("data-vimeo-id");vimeoVideoId&&(window["lgJsonP"+_this.el.getAttribute("lg-uid")+n]=function(content){$this.querySelector("img").setAttribute("src",content[0][_this.core.s.vimeoThumbSize])},(script=document.createElement("script")).className="lg-script",script.src="//www.vimeo.com/api/v2/video/"+vimeoVideoId+".json?callback=lgJsonP"+_this.el.getAttribute("lg-uid")+n,document.body.appendChild(script))})();utils.addClass($thumb[_this.core.index],"active"),utils.on(_this.core.el,"onBeforeSlide.lgtm",function(){for(var j=0;j<$thumb.length;j++)utils.removeClass($thumb[j],"active");utils.addClass($thumb[_this.core.index],"active")});for(var k=0;k<$thumb.length;k++)(index=>{utils.on($thumb[index],"click.lg touchend.lg",function(){setTimeout(function(){(!_this.thumbClickable||_this.core.lgBusy)&&_this.core.doCss()||(_this.core.index=index,_this.core.slide(_this.core.index,!1,!0))},50)})})(k);utils.on(_this.core.el,"onBeforeSlide.lgtm",function(){_this.animateThumb(_this.core.index)}),utils.on(window,"resize.lgthumb orientationchange.lgthumb",function(){setTimeout(function(){_this.animateThumb(_this.core.index),_this.thumbOuterWidth=_this.thumbOuter.offsetWidth},200)})},Thumbnail.prototype.setTranslate=function(value){utils.setVendor(this.core.outer.querySelector(".lg-thumb"),"Transform","translate3d(-"+value+"px, 0px, 0px)")},Thumbnail.prototype.animateThumb=function(index){var position,$thumb=this.core.outer.querySelector(".lg-thumb");if(this.core.s.animateThumb){switch(this.core.s.currentPagerPosition){case"left":position=0;break;case"middle":position=this.thumbOuterWidth/2-this.core.s.thumbWidth/2;break;case"right":position=this.thumbOuterWidth-this.core.s.thumbWidth}this.left=(this.core.s.thumbWidth+this.core.s.thumbMargin)*index-1-position,this.left>this.thumbTotalWidth-this.thumbOuterWidth&&(this.left=this.thumbTotalWidth-this.thumbOuterWidth),this.left<0&&(this.left=0),this.core.lGalleryOn&&(utils.hasClass($thumb,"on")||utils.setVendor(this.core.outer.querySelector(".lg-thumb"),"TransitionDuration",this.core.s.speed+"ms")),this.core.doCss()||($thumb.style.left=-this.left+"px"),this.setTranslate(this.left)}},Thumbnail.prototype.enableThumbDrag=function(){var _this=this,startCoords=0,endCoords=0,isDraging=!1,isMoved=!1,tempLeft=0;utils.addClass(_this.thumbOuter,"lg-grab"),utils.on(_this.core.outer.querySelector(".lg-thumb"),"mousedown.lgthumb",function(e){_this.thumbTotalWidth>_this.thumbOuterWidth&&(e.preventDefault(),startCoords=e.pageX,isDraging=!0,_this.core.outer.scrollLeft+=1,--_this.core.outer.scrollLeft,_this.thumbClickable=!1,utils.removeClass(_this.thumbOuter,"lg-grab"),utils.addClass(_this.thumbOuter,"lg-grabbing"))}),utils.on(window,"mousemove.lgthumb",function(e){isDraging&&(tempLeft=_this.left,isMoved=!0,endCoords=e.pageX,utils.addClass(_this.thumbOuter,"lg-dragging"),(tempLeft=(tempLeft-=endCoords-startCoords)>_this.thumbTotalWidth-_this.thumbOuterWidth?_this.thumbTotalWidth-_this.thumbOuterWidth:tempLeft)<0&&(tempLeft=0),_this.setTranslate(tempLeft))}),utils.on(window,"mouseup.lgthumb",function(){(!isMoved||(isMoved=!1,utils.removeClass(_this.thumbOuter,"lg-dragging"),_this.left=tempLeft,Math.abs(endCoords-startCoords)<_this.core.s.swipeThreshold))&&(_this.thumbClickable=!0),isDraging&&(isDraging=!1,utils.removeClass(_this.thumbOuter,"lg-grabbing"),utils.addClass(_this.thumbOuter,"lg-grab"))})},Thumbnail.prototype.enableThumbSwipe=function(){var _this=this,startCoords=0,endCoords=0,isMoved=!1,tempLeft=0;utils.on(_this.core.outer.querySelector(".lg-thumb"),"touchstart.lg",function(e){_this.thumbTotalWidth>_this.thumbOuterWidth&&(e.preventDefault(),startCoords=e.targetTouches[0].pageX,_this.thumbClickable=!1)}),utils.on(_this.core.outer.querySelector(".lg-thumb"),"touchmove.lg",function(e){_this.thumbTotalWidth>_this.thumbOuterWidth&&(e.preventDefault(),endCoords=e.targetTouches[0].pageX,isMoved=!0,utils.addClass(_this.thumbOuter,"lg-dragging"),tempLeft=_this.left,(tempLeft=(tempLeft-=endCoords-startCoords)>_this.thumbTotalWidth-_this.thumbOuterWidth?_this.thumbTotalWidth-_this.thumbOuterWidth:tempLeft)<0&&(tempLeft=0),_this.setTranslate(tempLeft))}),utils.on(_this.core.outer.querySelector(".lg-thumb"),"touchend.lg",function(){_this.thumbTotalWidth>_this.thumbOuterWidth&&isMoved?(isMoved=!1,utils.removeClass(_this.thumbOuter,"lg-dragging"),Math.abs(endCoords-startCoords)<_this.core.s.swipeThreshold&&(_this.thumbClickable=!0),_this.left=tempLeft):_this.thumbClickable=!0})},Thumbnail.prototype.toggle=function(){var _this=this;_this.core.s.toggleThumb&&(utils.addClass(_this.core.outer,"lg-can-toggle"),_this.thumbOuter.insertAdjacentHTML("beforeend",'<button aria-label="Toggle thumbnails" class="lg-toggle-thumb lg-icon"></button>'),utils.on(_this.core.outer.querySelector(".lg-toggle-thumb"),"click.lg",function(){utils.hasClass(_this.core.outer,"lg-thumb-open")?utils.removeClass(_this.core.outer,"lg-thumb-open"):utils.addClass(_this.core.outer,"lg-thumb-open")}))},Thumbnail.prototype.thumbkeyPress=function(){var _this=this;utils.on(window,"keydown.lgthumb",function(e){38===e.keyCode?(e.preventDefault(),utils.addClass(_this.core.outer,"lg-thumb-open")):40===e.keyCode&&(e.preventDefault(),utils.removeClass(_this.core.outer,"lg-thumb-open"))})},Thumbnail.prototype.destroy=function(d){if(this.core.s.thumbnail&&1<this.core.items.length){utils.off(window,".lgthumb"),d||this.thumbOuter.parentNode.removeChild(this.thumbOuter),utils.removeClass(this.core.outer,"lg-has-thumb");for(var lgScript=document.getElementsByClassName("lg-script");lgScript[0];)lgScript[0].parentNode.removeChild(lgScript[0])}},window.lgModules.thumbnail=Thumbnail},void 0!==exports?factory():(factory(),global.lgThumbnail={})},{}]},{},[1])(1)});