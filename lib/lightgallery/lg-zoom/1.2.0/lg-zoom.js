!function(f){"object"==typeof exports&&"undefined"!=typeof module?module.exports=f():"function"==typeof define&&define.amd?define([],f):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).LgZoom=f()}(function(){return function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);throw(f=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",f}c=n[i]={exports:{}},e[i][0].call(c.exports,function(r){return o(e[i][1][r]||r)},c,c.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){var global,factory;global=this,factory=function(){function Zoom(element){return this.el=element,this.core=window.lgData[this.el.getAttribute("lg-uid")],this.core.s=_extends({},zoomDefaults,this.core.s),this.core.s.zoom&&this.core.doCss()&&(this.init(),this.zoomabletimeout=!1,this.pageX=window.innerWidth/2,this.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop)),this}var useLeft,isChrome,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},zoomDefaults={scale:1,zoom:!0,actualSize:!0,enableZoomAfter:300,useLeftForZoom:(useLeft=!1,isChrome=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./),useLeft=!!(isChrome&&parseInt(isChrome[2],10)<54)||useLeft)};Zoom.prototype.init=function(){function actualSize(event,image,index,fromIcon){var w=image.clientWidth,index=_this.core.s.dynamic?_this.core.s.dynamicEl[index].width||image.naturalWidth||w:_this.core.items[index].getAttribute("data-width")||image.naturalWidth||w;utils.hasClass(_this.core.outer,"lg-zoomed")?scale=1:w<index&&(scale=index/w||2),fromIcon?(_this.pageX=window.innerWidth/2,_this.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop)):(_this.pageX=event.pageX||event.targetTouches[0].pageX,_this.pageY=event.pageY||event.targetTouches[0].pageY),callScale(),setTimeout(function(){utils.removeClass(_this.core.outer,"lg-grabbing"),utils.addClass(_this.core.outer,"lg-grab")},10)}var _this=this,zoomIcons='<button aria-label="Zoom in" id="lg-zoom-in" class="lg-icon"></button><button aria-label="Zoom out" id="lg-zoom-out" class="lg-icon"></button>',scale=(_this.core.s.actualSize&&(zoomIcons+='<button aria-label="Actual size" id="lg-actual-size" class="lg-icon"></button>'),_this.core.s.useLeftForZoom?utils.addClass(_this.core.outer,"lg-use-left-for-zoom"):utils.addClass(_this.core.outer,"lg-use-transition-for-zoom"),this.core.outer.querySelector(".lg-toolbar").insertAdjacentHTML("beforeend",zoomIcons),utils.on(_this.core.el,"onSlideItemLoad.lgtmzoom",function(event){var _speed=_this.core.s.enableZoomAfter+event.detail.delay;utils.hasClass(document.body,"lg-from-hash")&&event.detail.delay?_speed=0:utils.removeClass(document.body,"lg-from-hash"),_this.zoomabletimeout=setTimeout(function(){utils.addClass(_this.core.___slide[event.detail.index],"lg-zoomable")},_speed+30)}),1),zoom=function(scaleVal){var image=_this.core.outer.querySelector(".lg-current .lg-image"),offsetX=(window.innerWidth-image.clientWidth)/2,offsetY=(window.innerHeight-image.clientHeight)/2+(document.documentElement.scrollTop||document.body.scrollTop),offsetX=(scaleVal-1)*(_this.pageX-offsetX),offsetY=(scaleVal-1)*(_this.pageY-offsetY);utils.setVendor(image,"Transform","scale3d("+scaleVal+", "+scaleVal+", 1)"),image.setAttribute("data-scale",scaleVal),_this.core.s.useLeftForZoom?(image.parentElement.style.left=-offsetX+"px",image.parentElement.style.top=-offsetY+"px"):utils.setVendor(image.parentElement,"Transform","translate3d(-"+offsetX+"px, -"+offsetY+"px, 0)"),image.parentElement.setAttribute("data-x",offsetX),image.parentElement.setAttribute("data-y",offsetY)},callScale=function(){1<scale?utils.addClass(_this.core.outer,"lg-zoomed"):_this.resetZoom(),zoom(scale=scale<1?1:scale)},tapped=!1;utils.on(_this.core.el,"onAferAppendSlide.lgtmzoom",function(event){var index=event.detail.index,image=_this.core.___slide[index].querySelector(".lg-image");_this.core.isTouch||utils.on(image,"dblclick",function(event){actualSize(event,image,index)}),_this.core.isTouch&&utils.on(image,"touchstart",function(event){tapped?(clearTimeout(tapped),tapped=null,actualSize(event,image,index)):tapped=setTimeout(function(){tapped=null},300),event.preventDefault()})}),utils.on(window,"resize.lgzoom scroll.lgzoom orientationchange.lgzoom",function(){_this.pageX=window.innerWidth/2,_this.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop),zoom(scale)}),utils.on(document.getElementById("lg-zoom-out"),"click.lg",function(){_this.core.outer.querySelector(".lg-current .lg-image")&&(scale-=_this.core.s.scale,callScale())}),utils.on(document.getElementById("lg-zoom-in"),"click.lg",function(){_this.core.outer.querySelector(".lg-current .lg-image")&&(scale+=_this.core.s.scale,callScale())}),utils.on(document.getElementById("lg-actual-size"),"click.lg",function(event){actualSize(event,_this.core.___slide[_this.core.index].querySelector(".lg-image"),_this.core.index,!0)}),utils.on(_this.core.el,"onBeforeSlide.lgtm",function(){scale=1,_this.resetZoom()}),_this.core.isTouch||_this.zoomDrag(),_this.core.isTouch&&_this.zoomSwipe()},Zoom.prototype.resetZoom=function(){utils.removeClass(this.core.outer,"lg-zoomed");for(var i=0;i<this.core.___slide.length;i++)this.core.___slide[i].querySelector(".lg-img-wrap")&&(this.core.___slide[i].querySelector(".lg-img-wrap").removeAttribute("style"),this.core.___slide[i].querySelector(".lg-img-wrap").removeAttribute("data-x"),this.core.___slide[i].querySelector(".lg-img-wrap").removeAttribute("data-y"));for(var j=0;j<this.core.___slide.length;j++)this.core.___slide[j].querySelector(".lg-image")&&(this.core.___slide[j].querySelector(".lg-image").removeAttribute("style"),this.core.___slide[j].querySelector(".lg-image").removeAttribute("data-scale"));this.pageX=window.innerWidth/2,this.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop)},Zoom.prototype.zoomSwipe=function(){for(var _this=this,startCoords={},endCoords={},isMoved=!1,allowX=!1,allowY=!1,i=0;i<_this.core.___slide.length;i++)utils.on(_this.core.___slide[i],"touchstart.lg",function(e){var image;utils.hasClass(_this.core.outer,"lg-zoomed")&&(image=_this.core.___slide[_this.core.index].querySelector(".lg-object"),allowY=image.offsetHeight*image.getAttribute("data-scale")>_this.core.outer.querySelector(".lg").clientHeight,(allowX=image.offsetWidth*image.getAttribute("data-scale")>_this.core.outer.querySelector(".lg").clientWidth)||allowY)&&(e.preventDefault(),startCoords={x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY})});for(var j=0;j<_this.core.___slide.length;j++)utils.on(_this.core.___slide[j],"touchmove.lg",function(e){var _el,distanceX;utils.hasClass(_this.core.outer,"lg-zoomed")&&(_el=_this.core.___slide[_this.core.index].querySelector(".lg-img-wrap"),e.preventDefault(),isMoved=!0,endCoords={x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY},utils.addClass(_this.core.outer,"lg-zoom-dragging"),e=allowY?-Math.abs(_el.getAttribute("data-y"))+(endCoords.y-startCoords.y):-Math.abs(_el.getAttribute("data-y")),distanceX=allowX?-Math.abs(_el.getAttribute("data-x"))+(endCoords.x-startCoords.x):-Math.abs(_el.getAttribute("data-x")),15<Math.abs(endCoords.x-startCoords.x)||15<Math.abs(endCoords.y-startCoords.y))&&(_this.core.s.useLeftForZoom?(_el.style.left=distanceX+"px",_el.style.top=e+"px"):utils.setVendor(_el,"Transform","translate3d("+distanceX+"px, "+e+"px, 0)"))});for(var k=0;k<_this.core.___slide.length;k++)utils.on(_this.core.___slide[k],"touchend.lg",function(){utils.hasClass(_this.core.outer,"lg-zoomed")&&isMoved&&(isMoved=!1,utils.removeClass(_this.core.outer,"lg-zoom-dragging"),_this.touchendZoom(startCoords,endCoords,allowX,allowY))})},Zoom.prototype.zoomDrag=function(){for(var _this=this,startCoords={},endCoords={},isDraging=!1,isMoved=!1,allowX=!1,allowY=!1,i=0;i<_this.core.___slide.length;i++)utils.on(_this.core.___slide[i],"mousedown.lgzoom",function(e){var image=_this.core.___slide[_this.core.index].querySelector(".lg-object");allowY=image.offsetHeight*image.getAttribute("data-scale")>_this.core.outer.querySelector(".lg").clientHeight,allowX=image.offsetWidth*image.getAttribute("data-scale")>_this.core.outer.querySelector(".lg").clientWidth,utils.hasClass(_this.core.outer,"lg-zoomed")&&utils.hasClass(e.target,"lg-object")&&(allowX||allowY)&&(e.preventDefault(),startCoords={x:e.pageX,y:e.pageY},isDraging=!0,_this.core.outer.scrollLeft+=1,--_this.core.outer.scrollLeft,utils.removeClass(_this.core.outer,"lg-grab"),utils.addClass(_this.core.outer,"lg-grabbing"))});utils.on(window,"mousemove.lgzoom",function(e){var _el,distanceX;isDraging&&(_el=_this.core.___slide[_this.core.index].querySelector(".lg-img-wrap"),isMoved=!0,endCoords={x:e.pageX,y:e.pageY},utils.addClass(_this.core.outer,"lg-zoom-dragging"),e=allowY?-Math.abs(_el.getAttribute("data-y"))+(endCoords.y-startCoords.y):-Math.abs(_el.getAttribute("data-y")),distanceX=allowX?-Math.abs(_el.getAttribute("data-x"))+(endCoords.x-startCoords.x):-Math.abs(_el.getAttribute("data-x")),_this.core.s.useLeftForZoom?(_el.style.left=distanceX+"px",_el.style.top=e+"px"):utils.setVendor(_el,"Transform","translate3d("+distanceX+"px, "+e+"px, 0)"))}),utils.on(window,"mouseup.lgzoom",function(e){isDraging&&(isDraging=!1,utils.removeClass(_this.core.outer,"lg-zoom-dragging"),!isMoved||startCoords.x===endCoords.x&&startCoords.y===endCoords.y||(endCoords={x:e.pageX,y:e.pageY},_this.touchendZoom(startCoords,endCoords,allowX,allowY)),isMoved=!1),utils.removeClass(_this.core.outer,"lg-grabbing"),utils.addClass(_this.core.outer,"lg-grab")})},Zoom.prototype.touchendZoom=function(startCoords,endCoords,allowX,allowY){var _el=this.core.___slide[this.core.index].querySelector(".lg-img-wrap"),image=this.core.___slide[this.core.index].querySelector(".lg-object"),distanceX=-Math.abs(_el.getAttribute("data-x"))+(endCoords.x-startCoords.x),distanceY=-Math.abs(_el.getAttribute("data-y"))+(endCoords.y-startCoords.y),minY=(this.core.outer.querySelector(".lg").clientHeight-image.offsetHeight)/2,maxY=Math.abs(image.offsetHeight*Math.abs(image.getAttribute("data-scale"))-this.core.outer.querySelector(".lg").clientHeight+minY),minX=(this.core.outer.querySelector(".lg").clientWidth-image.offsetWidth)/2,image=Math.abs(image.offsetWidth*Math.abs(image.getAttribute("data-scale"))-this.core.outer.querySelector(".lg").clientWidth+minX);(15<Math.abs(endCoords.x-startCoords.x)||15<Math.abs(endCoords.y-startCoords.y))&&(allowY&&(distanceY<=-maxY?distanceY=-maxY:-minY<=distanceY&&(distanceY=-minY)),allowX&&(distanceX<=-image?distanceX=-image:-minX<=distanceX&&(distanceX=-minX)),allowY?_el.setAttribute("data-y",Math.abs(distanceY)):distanceY=-Math.abs(_el.getAttribute("data-y")),allowX?_el.setAttribute("data-x",Math.abs(distanceX)):distanceX=-Math.abs(_el.getAttribute("data-x")),this.core.s.useLeftForZoom?(_el.style.left=distanceX+"px",_el.style.top=distanceY+"px"):utils.setVendor(_el,"Transform","translate3d("+distanceX+"px, "+distanceY+"px, 0)"))},Zoom.prototype.destroy=function(){utils.off(this.core.el,".lgzoom"),utils.off(window,".lgzoom");for(var i=0;i<this.core.___slide.length;i++)utils.off(this.core.___slide[i],".lgzoom");utils.off(this.core.el,".lgtmzoom"),this.resetZoom(),clearTimeout(this.zoomabletimeout),this.zoomabletimeout=!1},window.lgModules.zoom=Zoom},void 0!==exports?factory():(factory(),global.lgZoom={})},{}]},{},[1])(1)});